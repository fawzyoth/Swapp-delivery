import{a as Y,u as ee,r,s as c,j as e,S as v}from"./index-CSAr9akK.js";import{D as M,H as se,B as D}from"./DeliveryLayout-CRAFALeb.js";import{A as te}from"./arrow-left-Dn1HXWcl.js";import{c as g}from"./truck-D6n8440L.js";import{P as R,C as ae,a as y}from"./package-DINEK9ZC.js";import{X as re}from"./x-circle-C6p6cn9N.js";import{T as le}from"./trending-up-_hrZmKnu.js";import{C as ne,S as ce}from"./smartphone-DBXGVwVe.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=g("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=g("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=g("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=g("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=g("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),me="https://fawzyoth.github.io/Swapp-app",xe=l=>`${me}/#/client/tracking/${l}`,he=async l=>{const o=new Date().toLocaleString("fr-FR");return console.log(`
========================================`),console.log("ðŸ“± SMS NOTIFICATION (Console Mode)"),console.log("========================================"),console.log(`ðŸ“… Time: ${o}`),console.log(`ðŸ“ž To: ${l.to}`),console.log(`ðŸ“‹ Type: ${l.type.toUpperCase()}`),console.log("----------------------------------------"),console.log("ðŸ’¬ Message:"),console.log(l.message),console.log(`========================================
`),await new Promise(s=>setTimeout(s,100)),!0},L=async(l,o,s,w,m)=>{const _=xe(s);let i="";switch(w){case"validated":i="Votre echange a ete valide et sera bientot prepare.";break;case"preparing":i="Votre colis est en cours de preparation au mini-depot.";break;case"in_transit":i="Votre colis est en route vers vous!";break;case"delivery_verified":i="Le livreur a verifie et accepte votre echange.";break;case"delivery_rejected":i="Le livreur a signale un probleme avec l'echange.";break;case"completed":i="Votre echange est termine avec succes! Merci.";break;case"returned":i="Le produit a ete retourne.";break;default:i=`Nouveau statut: ${m}`}const C=`SWAPP - Mise a jour

Bonjour ${o},

Echange ${s}:
${i}

Statut: ${m}

Suivez votre echange:
${_}

SWAPP`;return he({to:l,message:C,type:"status_change"})};function ye(){const{code:l}=Y(),o=ee(),[s,w]=r.useState(null),[m,_]=r.useState([]),[i,C]=r.useState(!0),[z,S]=r.useState(!1),[q,k]=r.useState(!1),[V,X]=r.useState(!1),[u,U]=r.useState(null),[E,B]=r.useState(""),[A,F]=r.useState(""),[b,f]=r.useState(!1),[x,H]=r.useState(!1),[P,O]=r.useState(""),[p,j]=r.useState("cash"),[T,W]=r.useState("");r.useEffect(()=>{l&&Z()},[l]);const Z=async()=>{try{const t=l==null?void 0:l.trim().toUpperCase();console.log("Fetching exchange with code:",t);const{data:a,error:h}=await c.from("exchanges").select("*").eq("exchange_code",t).maybeSingle();if(h)throw console.error("Supabase error:",h),h;if(console.log("Exchange data received:",a),a){if(w(a),a.merchant_id){const{data:d}=await c.from("merchants").select("*").eq("id",a.merchant_id).maybeSingle();d&&U(d)}const{data:N}=await c.from("exchanges").select("*").eq("client_phone",a.client_phone).neq("id",a.id).order("created_at",{ascending:!1}).limit(5);_(N||[])}}catch(t){console.error("Error fetching exchange:",t)}finally{C(!1)}},G=()=>{k(!0)},J=()=>{const t=Date.now().toString(36).toUpperCase();return`BAG-${(s==null?void 0:s.exchange_code)||"EXC"}-${t}`},K=async()=>{if(!E.trim()){alert("Veuillez fournir une raison pour le refus");return}f(!0);try{const{data:{user:t}}=await c.auth.getUser();if(!t)throw new Error("Non authentifiÃ©");await c.from("exchanges").update({status:"delivery_rejected",updated_at:new Date().toISOString()}).eq("id",s.id),await c.from("delivery_verifications").insert({exchange_id:s.id,delivery_person_id:t.id,status:"rejected",rejection_reason:E}),await c.from("status_history").insert({exchange_id:s.id,status:"delivery_rejected"}),await L(s.client_phone,s.client_name,s.exchange_code,"delivery_rejected",v.delivery_rejected),S(!1),o("/delivery/dashboard")}catch(t){console.error("Error rejecting exchange:",t),alert("Erreur lors du refus de l'Ã©change")}finally{f(!1)}},Q=async()=>{const t=x?parseFloat(P):0;if(x&&(isNaN(t)||t<=0)){alert("Veuillez entrer un montant valide");return}f(!0);try{const{data:{user:a}}=await c.auth.getUser();if(!a)throw new Error("Non authentifiÃ©");const h=J(),{error:N}=await c.from("exchanges").update({status:"delivery_verified",bag_id:h,updated_at:new Date().toISOString()}).eq("id",s.id);if(N)throw console.error("Error updating exchange:",N),new Error("Erreur lors de la mise Ã  jour de l'Ã©change");x&&t>0&&await c.from("exchanges").update({amount_collected:t,collection_date:new Date().toISOString(),collected_by:a.id,settlement_status:"pending_settlement"}).eq("id",s.id).then(({error:d})=>{d&&console.warn("Financial columns not available:",d.message)}),await c.from("delivery_verifications").insert({exchange_id:s.id,delivery_person_id:a.id,status:"accepted",bag_id:h,payment_collected:x,amount_collected:t,payment_method:x?p:null,collection_notes:T||null}).then(({error:d})=>{d&&console.warn("delivery_verifications table not available:",d.message)}),x&&t>0&&await c.from("financial_transactions").insert({exchange_id:s.id,delivery_person_id:a.id,merchant_id:s.merchant_id,transaction_type:"collection_from_client",amount:t,currency:"TND",direction:"credit",status:"completed",description:`Encaissement client - ${s.exchange_code}`,created_by:a.id}).then(({error:d})=>{d&&console.warn("financial_transactions table not available:",d.message)}),await c.from("status_history").insert({exchange_id:s.id,status:"delivery_verified"}),await L(s.client_phone,s.client_name,s.exchange_code,"delivery_verified",v.delivery_verified),F(h),k(!1),X(!0)}catch(a){console.error("Error accepting exchange:",a),alert("Erreur lors de l'acceptation de l'Ã©change")}finally{f(!1)}};if(i)return e.jsx(M,{children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})})});if(!s)return e.jsx(M,{children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Ã‰change non trouvÃ©"}),e.jsxs("p",{className:"text-slate-600 mb-4",children:['Le code "',l,`" n'existe pas.`]}),e.jsx("button",{onClick:()=>o("/delivery/scan"),className:"px-6 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:"Retour au scanner"})]})})});const n={total:m.length,validated:m.filter(t=>t.status==="validated"||t.status==="completed"||t.status==="delivery_verified").length,rejected:m.filter(t=>t.status==="rejected"||t.status==="delivery_rejected").length};return e.jsx(M,{children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("button",{onClick:()=>o("/delivery/scan"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors mb-6",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Retour au scanner"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:s.exchange_code}),e.jsxs("p",{className:"text-slate-600",children:["CrÃ©Ã© le"," ",new Date(s.created_at).toLocaleDateString("fr-FR")]})]}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${s.status==="validated"?"bg-emerald-100 text-emerald-800 border border-emerald-200":s.status==="in_transit"?"bg-blue-100 text-blue-800 border border-blue-200":"bg-amber-100 text-amber-800 border border-amber-200"}`,children:v[s.status]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(de,{className:"w-5 h-5 text-amber-600"}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Client"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Nom:"}),e.jsx("p",{className:"font-medium text-slate-900",children:s.client_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"TÃ©lÃ©phone:"}),e.jsx("p",{className:"font-medium text-slate-900",children:e.jsxs("a",{href:`tel:${s.client_phone}`,className:"text-amber-600 hover:text-amber-700 flex items-center gap-1",children:[e.jsx($,{className:"w-4 h-4"}),s.client_phone]})})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(R,{className:"w-5 h-5 text-amber-600"}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Produit"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Nom:"}),e.jsx("p",{className:"font-medium text-slate-900",children:s.product_name||"Non spÃ©cifiÃ©"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Raison d'Ã©change:"}),e.jsx("p",{className:"font-medium text-slate-900",children:s.reason})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl p-5 border border-amber-200 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(I,{className:"w-5 h-5 text-amber-700"}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Adresse de livraison"})]}),e.jsx("div",{className:"space-y-2 text-sm",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(se,{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:s.client_address||"Non fournie"}),e.jsx("p",{className:"text-slate-700",children:s.client_city&&s.client_postal_code?`${s.client_city} ${s.client_postal_code}, ${s.client_country||"Tunisia"}`:"Informations incomplÃ¨tes"})]})]})})]}),s.video&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-amber-600"}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"VidÃ©o de rÃ©fÃ©rence"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]})]}),e.jsx("div",{className:"bg-black rounded-lg overflow-hidden",children:e.jsx("video",{src:s.video,controls:!0,className:"w-full max-h-96",poster:""})}),e.jsxs("p",{className:"text-sm text-amber-700 mt-2 bg-amber-50 p-3 rounded-lg border border-amber-200",children:[e.jsx("strong",{children:"Important:"})," Comparez le produit prÃ©sentÃ© par le client avec cette vidÃ©o de rÃ©fÃ©rence avant d'accepter l'Ã©change."]})]}),s.photos&&s.photos.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Photos du produit"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:s.photos.map((t,a)=>e.jsx("img",{src:t,alt:`Photo ${a+1}`,className:"w-full h-40 object-cover rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(t,"_blank")},a))})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-slate-200",children:[e.jsxs("button",{onClick:G,className:"flex-1 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Accepter l'Ã©change"]}),e.jsxs("button",{onClick:()=>S(!0),className:"flex-1 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(re,{className:"w-5 h-5"}),"Refuser l'Ã©change"]})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(le,{className:"w-5 h-5 text-amber-600"}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Historique du client"})]}),m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ie,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Premier Ã©change de ce client"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900",children:n.total}),e.jsx("div",{className:"text-xs text-slate-600",children:"Ã‰changes"})]}),e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-3 border border-emerald-200",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:n.validated}),e.jsx("div",{className:"text-xs text-emerald-700",children:"ValidÃ©s"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3 border border-red-200",children:[e.jsx("div",{className:"text-2xl font-bold text-red-700",children:n.rejected}),e.jsx("div",{className:"text-xs text-red-700",children:"RefusÃ©s"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Derniers Ã©changes"}),m.slice(0,3).map(t=>e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-mono text-xs text-slate-600",children:t.exchange_code}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t.status==="validated"||t.status==="completed"||t.status==="delivery_verified"?"bg-emerald-100 text-emerald-700":t.status==="rejected"||t.status==="delivery_rejected"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:v[t.status]})]}),e.jsx("p",{className:"text-xs text-slate-600 truncate",children:t.reason}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:new Date(t.created_at).toLocaleDateString("fr-FR")})]},t.id))]}),n.total>0&&e.jsx("div",{className:`rounded-lg p-3 border ${n.validated/n.total>=.7?"bg-emerald-50 border-emerald-200":n.validated/n.total>=.4?"bg-amber-50 border-amber-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:`w-4 h-4 ${n.validated/n.total>=.7?"text-emerald-600":n.validated/n.total>=.4?"text-amber-600":"text-red-600"}`}),e.jsxs("span",{className:"text-sm font-medium",children:["Taux de validation:"," ",Math.round(n.validated/n.total*100),"%"]})]})})]})]})})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Refuser l'Ã©change"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Veuillez expliquer pourquoi vous refusez cet Ã©change"}),e.jsx("textarea",{value:E,onChange:t=>B(t.target.value),placeholder:"Ex: Le produit ne correspond pas Ã  la vidÃ©o de rÃ©fÃ©rence...",rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>S(!1),disabled:b,className:"flex-1 px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Annuler"}),e.jsx("button",{onClick:K,disabled:b,className:"flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 disabled:bg-slate-300 text-white rounded-lg font-medium transition-colors",children:b?"Traitement...":"Confirmer le refus"})]})]})})}),q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg",children:e.jsx(y,{className:"w-6 h-6 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Confirmer l'acceptation"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Confirmez l'Ã©change et indiquez si un paiement a Ã©tÃ© encaissÃ©"})]})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Code Ã©change:"}),e.jsx("span",{className:"font-mono font-medium text-slate-900",children:s==null?void 0:s.exchange_code})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Client:"}),e.jsx("span",{className:"font-medium text-slate-900",children:s==null?void 0:s.client_name})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(D,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900",children:"Encaissement"}),e.jsx("p",{className:"text-sm text-slate-600",children:(s==null?void 0:s.payment_amount)>0?`Montant attendu: ${s.payment_amount.toFixed(2)} TND`:"Indiquez si vous avez encaissÃ© un paiement"})]})]}),e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:t=>H(t.target.checked),className:"w-5 h-5 rounded border-slate-300 text-amber-600 focus:ring-amber-500"}),e.jsx("span",{className:"font-medium text-slate-900",children:"Paiement encaissÃ©"})]})}),x&&e.jsxs("div",{className:"space-y-4 bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Montant encaissÃ© (TND)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:P,onChange:t=>O(t.target.value),placeholder:"0.00",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 font-mono text-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mode de paiement"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>j("cash"),className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-colors ${p==="cash"?"border-amber-500 bg-amber-100 text-amber-800":"border-slate-200 bg-white text-slate-700 hover:border-slate-300"}`,children:[e.jsx(D,{className:"w-5 h-5"}),"EspÃ¨ces"]}),e.jsxs("button",{type:"button",onClick:()=>j("card"),className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-colors ${p==="card"?"border-amber-500 bg-amber-100 text-amber-800":"border-slate-200 bg-white text-slate-700 hover:border-slate-300"}`,children:[e.jsx(ne,{className:"w-5 h-5"}),"Carte"]}),e.jsxs("button",{type:"button",onClick:()=>j("mobile_payment"),className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-colors ${p==="mobile_payment"?"border-amber-500 bg-amber-100 text-amber-800":"border-slate-200 bg-white text-slate-700 hover:border-slate-300"}`,children:[e.jsx(ce,{className:"w-5 h-5"}),"Mobile"]}),e.jsx("button",{type:"button",onClick:()=>j("other"),className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-colors ${p==="other"?"border-amber-500 bg-amber-100 text-amber-800":"border-slate-200 bg-white text-slate-700 hover:border-slate-300"}`,children:"Autre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes (optionnel)"}),e.jsx("input",{type:"text",value:T,onChange:t=>W(t.target.value),placeholder:"Ex: ReÃ§u numÃ©ro...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>k(!1),disabled:b,className:"flex-1 px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Annuler"}),e.jsx("button",{onClick:Q,disabled:b,className:"flex-1 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 disabled:bg-slate-300 text-white rounded-lg font-medium transition-colors",children:b?"Traitement...":"Confirmer l'acceptation"})]})]})})}),V&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-100 rounded-full mb-4",children:e.jsx(y,{className:"w-8 h-8 text-emerald-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Ã‰change AcceptÃ©"}),e.jsx("p",{className:"text-slate-600",children:"Le retour a Ã©tÃ© assignÃ© au sac de collecte"})]}),e.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{className:"w-5 h-5 text-emerald-600"}),e.jsx("span",{className:"font-semibold text-emerald-900",children:"Sac assignÃ©"})]}),e.jsx("p",{className:"font-mono text-lg text-emerald-800",children:A})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(I,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"font-semibold text-amber-900",children:"Adresse de retour E-CommerÃ§ant"})]}),u?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-slate-900",children:u.name}),e.jsx("p",{className:"text-slate-700",children:u.address||"123 Rue du Commerce"}),e.jsxs("p",{className:"text-slate-700",children:[u.city||"Tunis"," ",u.postal_code||"1000"]}),e.jsxs("p",{className:"text-slate-600 flex items-center gap-1 mt-2",children:[e.jsx($,{className:"w-4 h-4"}),u.phone||"+216 XX XXX XXX"]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-slate-900",children:"SWAPP E-Commerce"}),e.jsx("p",{className:"text-slate-700",children:"Zone Industrielle, Rue de l'Innovation"}),e.jsx("p",{className:"text-slate-700",children:"Tunis 1000, Tunisia"}),e.jsxs("p",{className:"text-slate-600 flex items-center gap-1 mt-2",children:[e.jsx($,{className:"w-4 h-4"}),"+216 71 234 567"]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Instructions:"})," DÃ©posez le sac"," ",e.jsx("span",{className:"font-mono",children:A})," Ã  l'adresse indiquÃ©e ci-dessus pour retourner l'article au e-commerÃ§ant."]})}),e.jsx("button",{onClick:()=>o("/delivery/dashboard"),className:"w-full py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium transition-colors",children:"Terminer"})]})})})]})})}export{ye as default};
